<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.5 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Pensar SDK, A Rapid Artificial Intelligence Application Development framework - Amine Hadj-Youcef</title>
<meta name="description" content="A Software Development Kit (SDK) for rapid development of artificial intelligence based Computer Vision  application">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Amine Hadj-Youcef">
<meta property="og:title" content="Pensar SDK, A Rapid Artificial Intelligence Application Development framework">
<meta property="og:url" content="http://localhost:4000/pensarsdk-1/">


  <meta property="og:description" content="A Software Development Kit (SDK) for rapid development of artificial intelligence based Computer Vision  application">



  <meta property="og:image" content="http://localhost:4000/assets/images/pensarsdk/pensarsdk_logo_wide.png">





  <meta property="article:published_time" content="2019-08-20T00:00:00+02:00">





  

  


<link rel="canonical" href="http://localhost:4000/pensarsdk-1/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Amine Hadj-Youcef",
      "url": "http://localhost:4000",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Amine Hadj-Youcef Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/mon_logo.png" alt=""></a>
        
        <a class="site-title" href="/">
          Amine Hadj-Youcef
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/resume/" >Resume</a>
            </li><li class="masthead__menu-item">
              <a href="/projects/" >Projects</a>
            </li><li class="masthead__menu-item">
              <a href="/articles/" >Articles</a>
            </li><li class="masthead__menu-item">
              <a href="/papers/" >Papers</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  











<div class="page__hero"
  style=" "
>
  
    <img src="/assets/images/pensarsdk/pensarsdk_logo_wide.png" alt="Pensar SDK, A Rapid Artificial Intelligence Application Development framework" class="page__hero-image">
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name"></h3>
    
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Pensar SDK, A Rapid Artificial Intelligence Application Development framework">
    <meta itemprop="description" content="A Software Development Kit (SDK) for rapid development of artificial intelligence based Computer Vision  application">
    <meta itemprop="datePublished" content="August 20, 2019">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Pensar SDK, A Rapid Artificial Intelligence Application Development framework
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  8 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-cog"></i> Table of Contents</h4></header>
              <ul class="toc__menu">
  <li><a href="#why-pensar-sdk">Why Pensar SDK?</a></li>
  <li><a href="#features-of-pensar-sdk">Features of Pensar SDK</a></li>
  <li><a href="#the-concept-of-pensar-sdk">The concept of Pensar SDK</a></li>
  <li><a href="#application-pipeline">Application Pipeline</a>
    <ul>
      <li><a href="#preprocessor-pipeline">Preprocessor pipeline</a></li>
      <li><a href="#plugin-pipeline">Plugin pipeline</a></li>
    </ul>
  </li>
  <li><a href="#use-case-development-of-an-application-for-object-detection">Use-Case: Development of an Application for Object Detection</a>
    <ul>
      <li><a href="#create-the-application-folder">Create the Application Folder</a></li>
      <li><a href="#launch-vs-code-from-inside-the-development-environment">Launch VS Code from Inside the Development Environment</a></li>
      <li><a href="#configure-the-application">Configure the Application</a></li>
      <li><a href="#create-your-personalized-plugins">Create your Personalized Plugins</a></li>
      <li><a href="#personalize-the-gui">Personalize the GUI</a></li>
      <li><a href="#run-the-application">Run the Application</a></li>
      <li><a href="#what-to-do-next">What to do next?</a></li>
      <li><a href="#want-to-read-more-">Want to read more ?</a></li>
    </ul>
  </li>
</ul>
            </nav>
          </aside>
        
        <!-- ![pensarsdk logo](pensarsdk/pensarsdk_logo_wide.png)

# Pensar SDK, A Rapid Artificial Intelligence Application Development framework -->

<blockquote>
  <p>A Software Development Kit (SDK) for rapid development of artificial based (AI) based Computer Vision (CV) application
The original article is published on medium <a href="https://medium.com/swlh/pensar-sdk-1-647f778bc11">here</a></p>
</blockquote>

<p>This article is organized as follow:</p>

<!-- TOC depthFrom:1 depthTo:1 withLinks:1 updateOnSave:1 orderedList:0 -->

<!-- - [Pensar SDK, A Rapid Artificial Intelligence Application Development framework](#pensar-sdk-a-rapid-artificial-intelligence-application-development-framework)
  - [Why Pensar SDK?](#why-pensar-sdk)
  - [Features of Pensar SDK](#features-of-pensar-sdk)
  - [The concept of Pensar SDK](#the-concept-of-pensar-sdk)
  - [Application Pipeline](#application-pipeline)
    - [Preprocessor pipeline](#preprocessor-pipeline)
    - [Plugin pipeline](#plugin-pipeline)
  - [Use-Case: Development of an Application for Object Detection](#use-case-development-of-an-application-for-object-detection)
    - [Create the Application Folder](#create-the-application-folder)
    - [Launch VS Code from Inside the Development Environment](#launch-vs-code-from-inside-the-development-environment)
    - [Configure the Application](#configure-the-application)
    - [Create your Personalized Plugins](#create-your-personalized-plugins)
    - [Personalize the GUI](#personalize-the-gui)
    - [Run the Application](#run-the-application)
    - [What to do next?](#what-to-do-next)
    - [Want to read more ?](#want-to-read-more-) -->

<!-- /TOC -->

<p>In the past days I have been using and testing <a href="https://pensarsdk.com/">Pensar SDK</a>, a Software Development Kit (SDK) for rapid development of AI-based Computer Vision (CV) application. It allows the development of AI-based Computer Vision application that can easily be deployed on <em>Pensar</em>, an embedded camera developed by <a href="https://www.aerialtronics.com/en/products/pensar">Aerialtronics</a>, a manufacturer of unmanned aerial vehicles, commonly known as drones, for aerial photography and videography.</p>

<p align="center">
  <img src="/assets/images/pensarsdk/pensar_cover.png" alt="pensar camera" />
</p>

<p>In this article I give an overview and walk you through the development of an object detection application using Pensar SDK.</p>

<h2 id="why-pensar-sdk">Why Pensar SDK?</h2>

<p>The domain of Artificial Intelligence is increasingly expanding and has already started disrupting many industries. New deep learning models and use-cases are proposed on a daily basis. The amount of data is flourishing thanks to the availability of the data-generator devices, smartphones, IoT, drones, robots…. On the other side, companies like NVIDIA are pushing the boundaries of computing devices by developing powerful computing (a.k.a, Graphical Processing Unit: GPU) which are faster, smaller, energy-efficient, and cheaper.</p>

<p>One of the most important fields where AI is making a big step is Computer Vision. It is considered one of the most disrupting fields in today’s world. It started little by little shifting many technologies across industries, from self-driving cars, smart city, video surveillance to robotics, transportation, defense and security, and more. To have an idea, here is a link on the latest workshop from the Computer Vision Foundation listing advanced research in the field: <a href="http://openaccess.thecvf.com/CVPR2019_workshops/menu.py">CVPR 2019 Workshops</a></p>

<p>If you are a data scientist working on an AI-based computer vision solution and have experience of deploying these models on an edge device (e, g, smart camera), you probably agree with me that this is time (and money) consuming and is no fun at all. Building your development environment from scratch could be a nightmare, especially when the edge device has multiple components. If you don’t strategically plan your solution, you end up wasting too much time setting up a workable development environment, instead of focusing on unlocking information from your data and developing a fast and accurate solution for your business.</p>

<p>Practically speaking, not every business is able to do that for a lack of skill and knowledge. As a result, Pensar SDK is created to offer a resilient development and deployment solution for business. Pensar SDK is the first R(ai)AD, Rapid artificial intelligence Application Development framework. It is shipped with Pensar, an intelligent dual-camera based on the NVIDIA Jetson TX2. Pensar SDK’s mission is to save time and help businesses to easily and rapidly develop an AI-based computer vision application.</p>

<!-- Get started immediately with an application framework that takes care of cameras, recordings and communications for you.   Choose an inference engine, add your neural network or   choose from the shipped ones, add your own application   logic and GUI design via python-based plug-ins. All of this   while developing and testing from Visual Studio Code on your laptop and easily deploying on NVIDIA Jetson hardware. -->

<h2 id="features-of-pensar-sdk">Features of Pensar SDK</h2>

<p>Pensar SDK is more than a list of compiled libraries. It includes many features, among which:</p>

<ul>
  <li>A complete ready-to-use application framework</li>
  <li>Enables deep learning inference at the edge</li>
  <li>Plug and play pre-trained deep learning models</li>
  <li>Compatible with Linux-based desktop machine (AMD64) and edge device (ARM64) powered with NVIDIA Jetson TX1/TX2</li>
  <li>It supports most common Deep Learning and Computer Vision frameworks:
    <ul>
      <li>Python/ C++ / Kivy</li>
      <li>OpenCV</li>
      <li>TensorRT</li>
      <li>…</li>
    </ul>
  </li>
  <li>Possibility to easily collect your data on the fly</li>
  <li>and more features</li>
</ul>

<h2 id="the-concept-of-pensar-sdk">The concept of Pensar SDK</h2>

<p>In the figure below I illustrate the workflow of development and deployment of an AI-based computer vision application using Pensar SDK</p>

<p align="center">
  <img src="/assets/images/pensarsdk/pensarsdk_workflow.png" alt="pensarsdk setup" />
</p>

<p>Pensar SDK is installed on:</p>

<ul>
  <li>The host machine: from which the developer develop the application (design the application, import the trained neural network, …)</li>
  <li>On the Edge device: Pensar SDK needs to be installed on the edge device to ensure a compatible and easy deployment.</li>
</ul>

<p><strong>Note</strong>: Please note that Pensar SDK has no tool to help you train your neural network. To do that you can use tool such as Amazon AWS, Google cloud platform, Azure …</p>

<h2 id="application-pipeline">Application Pipeline</h2>

<p>The figure below illustrates the application development pipeline:</p>

<p align="center">
  <img src="/assets/images/pensarsdk/application_pipeline.png" alt="pensarsdk pipeline" />
</p>

<h3 id="preprocessor-pipeline">Preprocessor pipeline</h3>

<p>Here the trained deep learning model is parsed. The user can either use the installed one or import his trained model. The <code class="language-plaintext highlighter-rouge">preprocessor</code> takes care of all the hardware acceleration and optimization of AI/CV libraries.</p>

<h3 id="plugin-pipeline">Plugin pipeline</h3>

<p>This is the core of the application that the user must configure and personalized. It is a plugin-based structure, where the preprocessed video passes through each one of them.</p>

<h2 id="use-case-development-of-an-application-for-object-detection">Use-Case: Development of an Application for Object Detection</h2>

<p>At the input, the application takes a video captured with the edge device (the camera Pensar of Aerialtronics) and outputs the same video with an overlay from the inference.</p>

<p>The figure below illustrates the application development pipeline:</p>

<p align="center">
  <img src="/assets/images/pensarsdk/application_pipeline_object_detection.png" alt="pensarsdk pipeline application" />
</p>

<p>Let’s see how this is done in practice on my laptop computer. I have Ubuntu 18.04 64-bits installed and NVIDIA GPU GeForce GTX 1660 Ti (I know it is not the best :)).</p>

<h3 id="create-the-application-folder">Create the Application Folder</h3>

<p>By running the script <code class="language-plaintext highlighter-rouge">new_app_skeleton.sh</code>, a new application folder is created with the name you enter. The folder is not empty, it contains a template application files that you have to edit and adapt to the desired application.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user@user-host-machine:~/pensarsdk/applications<span class="nv">$ </span>./new_app_skeleton.sh

<span class="s2">"This script can be used to create a new plugin-manager application
 skeleton with a custom name, based on the hello_world example.

The name must be given in snake case (https://en.wikipedia.org/wiki/Snake_case)
 and the script will take care of appropriate CamelCase conversion for class names.

The skeleton app will be composed of a single python plugin, with an
 empty .kv GUI file, no neural network application and will be
 equivalent in functionality to the hello_world application."</span>

Please enter the name of the app you want to create:
my_app
</code></pre></div></div>

<p>The application folder is created with a path</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/pensarsdk/applications/my_app
</code></pre></div></div>

<h3 id="launch-vs-code-from-inside-the-development-environment">Launch VS Code from Inside the Development Environment</h3>

<p>To launch Visual Studio Code, simply enter in the terminal</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> code <span class="nb">.</span>
</code></pre></div></div>

<h3 id="configure-the-application">Configure the Application</h3>

<p>We now have to configure the application. To do that simply edit the file <code class="language-plaintext highlighter-rouge">my_app.xml</code>, particularly, the <code class="language-plaintext highlighter-rouge">preprocessor_pipeline</code> and the <code class="language-plaintext highlighter-rouge">plugins_pipeline</code>.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;plugin_manager_pipeline&gt;</span>

  # Insert a title for your application, simple text-markup can be used (i.e. [/b])
  <span class="nt">&lt;title&gt;</span>[b][color=ff0000]HelloWorld[/color][/b]<span class="nt">&lt;/title&gt;</span>

  # Configure the preprocessor to perform inference using your neural network or ones of neural
  # networks included in the framework.
  # In this example we use YOLOv2-tiny included in the framework, it is based on DarkNet.
  <span class="nt">&lt;preprocessor_pipeline&gt;</span>
      <span class="nt">&lt;video_capture</span> <span class="na">selected=</span><span class="s">"0"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;neural_network</span> <span class="na">type=</span><span class="s">"Darknet"</span> <span class="na">confidence=</span><span class="s">"0.6"</span> <span class="na">frame_resize=</span><span class="s">"1.0"</span> <span class="na">time_subsampling=</span><span class="s">"1"</span><span class="nt">&gt;</span>

          # Specify configuration file (.cgf) and the weights file (.weights)
          <span class="nt">&lt;load_params&gt;</span>[darknet/yolov3-320.cfg, darknet/yolov3.weights]<span class="nt">&lt;/load_params&gt;</span>

          # Specify label file, in this case we use COCO labels
	    <span class="nt">&lt;labels&gt;</span>darknet/coco.names<span class="nt">&lt;/labels&gt;</span>

      <span class="nt">&lt;/neural_network&gt;</span>
  <span class="nt">&lt;/preprocessor_pipeline&gt;</span>

  # Insert plugins in the right order to build the processing pipe
  <span class="nt">&lt;plugins_pipeline&gt;</span>
      # Import library plugin (located in /usr/bin/pensarsdk/plugins/preprocessor_inference.py)
      <span class="nt">&lt;plugin</span> <span class="na">modulename=</span><span class="s">"preprocessor_inference"</span> <span class="na">classname=</span><span class="s">"PreProcessorInference"</span> <span class="na">enabled=</span><span class="s">"True"</span> <span class="nt">/&gt;</span>

      # Add custom (user made) plugins. To be noticed that plugins can include a .kv if a GUI is needed.
      <span class="nt">&lt;plugin</span> <span class="na">modulename=</span><span class="s">"filter"</span> <span class="na">classname=</span><span class="s">"Filter"</span> <span class="na">enabled=</span><span class="s">"True"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;config</span> <span class="na">target_type=</span><span class="s">"[ bottle, chair, tvmonitor, book, cup, keyboard ]"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin</span> <span class="na">modulename=</span><span class="s">"visualize"</span> <span class="na">classname=</span><span class="s">"Visualize"</span> <span class="na">enabled=</span><span class="s">"True"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/plugins_pipeline&gt;</span>

<span class="nt">&lt;/plugin_manager_pipeline&gt;</span>
</code></pre></div></div>

<h3 id="create-your-personalized-plugins">Create your Personalized Plugins</h3>

<p>You can either use the predefined plugins or define yours. On the left of <code class="language-plaintext highlighter-rouge">VS Code</code> you find a list of all installed plugins under <code class="language-plaintext highlighter-rouge">Framework Plugins</code>, among which <code class="language-plaintext highlighter-rouge">pre_processor_inference.py</code>. You can also define your personalized plugins, in our case, <code class="language-plaintext highlighter-rouge">filter.py</code> and <code class="language-plaintext highlighter-rouge">visualize.py</code>.</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">filter.py</code>:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">kivy.uix.boxlayout</span> <span class="kn">import</span> <span class="n">BoxLayout</span>
<span class="kn">from</span> <span class="nn">kivy.graphics.texture</span> <span class="kn">import</span> <span class="n">Texture</span>
<span class="kn">from</span> <span class="nn">kivy.properties</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pluginmanager.utility</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">cv2</span>

<span class="c1"># Name of the plugin: Filter
</span><span class="k">class</span> <span class="nc">Filter</span><span class="p">(</span><span class="n">BoxLayout</span><span class="p">):</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s">"Filter"</span>
  <span class="n">font_overlay</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">FONT_HERSHEY_SIMPLEX</span>

  <span class="c1"># GUI parameters
</span>  <span class="n">label_text</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">"Switch Filtering ON/OFF:"</span><span class="p">)</span>
  <span class="n">switch_active</span> <span class="o">=</span> <span class="n">BooleanProperty</span><span class="p">()</span>
  <span class="n">labels_list</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">()</span>
  <span class="n">allowed_label</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">()</span>

  <span class="k">def</span> <span class="nf">onCreate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">labels_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">'target_type'</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allowed_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">switch_active</span> <span class="o">=</span> <span class="bp">False</span>

  <span class="k">def</span> <span class="nf">labelChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allowed_label</span> <span class="o">=</span> <span class="n">label</span>

  <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primary_input_frame</span><span class="p">,</span> <span class="n">secondary_input_frame</span><span class="p">,</span> <span class="n">output_frame</span><span class="p">,</span> <span class="n">frame_storage</span><span class="p">,</span> <span class="n">storage</span><span class="p">):</span>
    <span class="n">filtered_objects</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="p">(</span><span class="s">'object_locations'</span> <span class="ow">in</span> <span class="n">frame_storage</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">frame_storage</span><span class="p">[</span><span class="s">'object_locations'</span><span class="p">]):</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">putText</span><span class="p">(</span><span class="n">output_frame</span><span class="p">,</span> <span class="s">"Detection"</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">font_overlay</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">object_location</span> <span class="ow">in</span> <span class="n">frame_storage</span><span class="p">[</span><span class="s">'object_locations'</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">switch_active</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                <span class="n">cv2</span><span class="o">.</span><span class="n">putText</span><span class="p">(</span><span class="n">output_frame</span><span class="p">,</span> <span class="s">"Object Filtering: ON"</span><span class="p">,</span>
                            <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_overlay</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">object_location</span><span class="p">[</span><span class="s">'label'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowed_label</span><span class="p">:</span>
                    <span class="n">filtered_objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">object_location</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cv2</span><span class="o">.</span><span class="n">putText</span><span class="p">(</span><span class="n">output_frame</span><span class="p">,</span> <span class="s">"Object Filtering: OFF"</span><span class="p">,</span>
                            <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_overlay</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                <span class="n">filtered_objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">object_location</span><span class="p">)</span>

        <span class="n">frame_storage</span><span class="p">[</span><span class="s">'filtered_objects'</span><span class="p">]</span> <span class="o">=</span> <span class="n">filtered_objects</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">putText</span><span class="p">(</span><span class="n">output_frame</span><span class="p">,</span> <span class="s">"No Detection"</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_overlay</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">visualize.py</code>:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Visualize</span><span class="p">(</span><span class="n">BoxLayout</span><span class="p">):</span>
   <span class="n">name</span> <span class="o">=</span> <span class="s">"Visualize"</span>

   <span class="c1"># GUI parameters
</span>   <span class="n">label_text</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">"Display overlay:"</span><span class="p">)</span>
   <span class="n">switch_active</span> <span class="o">=</span> <span class="n">BooleanProperty</span><span class="p">()</span>

   <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primary_input_frame</span><span class="p">,</span> <span class="n">secondary_input_frame</span><span class="p">,</span> <span class="n">output_frame</span><span class="p">,</span> <span class="n">frame_storage</span><span class="p">,</span> <span class="n">storage</span><span class="p">):</span>
       <span class="s">"""
       This method performs visualization of overlays for each detected object in each frame image.
       It uses OpenCV function to draw a rectangle and adds a text to display the confidence of the detection.
       """</span>

       <span class="k">if</span> <span class="ow">not</span> <span class="s">'filtered_objects'</span> <span class="ow">in</span> <span class="n">frame_storage</span><span class="p">:</span>
           <span class="k">print</span><span class="p">(</span><span class="s">'No object detected'</span><span class="p">)</span>
           <span class="k">return</span>

       <span class="k">for</span> <span class="n">filtered_object</span> <span class="ow">in</span> <span class="n">frame_storage</span><span class="p">[</span><span class="s">'filtered_objects'</span><span class="p">]:</span>
         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">switch_active</span><span class="p">:</span>
           <span class="n">roi</span> <span class="o">=</span> <span class="n">filtered_object</span><span class="p">[</span><span class="s">'roi'</span><span class="p">]</span>
           <span class="n">pt1</span> <span class="o">=</span> <span class="p">(</span><span class="n">roi</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">roi</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
           <span class="n">pt2</span> <span class="o">=</span> <span class="p">(</span><span class="n">roi</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">roi</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
           <span class="n">ptText</span> <span class="o">=</span> <span class="p">(</span><span class="n">roi</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">roi</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">20</span><span class="p">)</span>
           <span class="n">colorOverlay</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>
           <span class="n">fontOverlay</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">FONT_HERSHEY_SIMPLEX</span>
           <span class="n">textOverlay</span> <span class="o">=</span> <span class="s">"{0:s} {1:2.2f}</span><span class="si">%</span><span class="s">"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">filtered_object</span><span class="p">[</span><span class="s">'label'</span><span class="p">],</span> <span class="n">filtered_object</span><span class="p">[</span><span class="s">'confidence'</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>

           <span class="n">cv2</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">output_frame</span><span class="p">,</span> <span class="n">pt1</span><span class="p">,</span> <span class="n">pt2</span><span class="p">,</span> <span class="n">colorOverlay</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
           <span class="n">cv2</span><span class="o">.</span><span class="n">putText</span><span class="p">(</span><span class="n">output_frame</span><span class="p">,</span> <span class="n">textOverlay</span><span class="p">,</span> <span class="n">ptText</span><span class="p">,</span> <span class="n">fontOverlay</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">colorOverlay</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="personalize-the-gui">Personalize the GUI</h3>

<p>Say we want to personalize the GUI of the application, for instance, I want to create a button to turn on/off filtering and add a spinner to select the label of the object of interest. To do that you need to create and edit a kivy file for each desired plugin, in our case <code class="language-plaintext highlighter-rouge">filter.py</code> and <code class="language-plaintext highlighter-rouge">visualize.kv</code>.</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">visualize.kv</code>:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Visualize@BoxLayout:
     orientation: "horizontal"
     size_hint: 1, 1

     switch_active: enable_switch.active

     Label:
         size_hint: 0.5, 1
         text: root.label_text

     Switch:
		 id: enable_switch
		 size_hint: 0.5, 1
		 active: True
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">filter.kv</code></p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Filter@BoxLayout&gt;:
    BoxLayout:
        orientation: "horizontal"
        size_hint: 1, 1
        height: '48dp'

        switch_active: enable_switch.active

        # Give lable
        Label:
            size_hint: 1, 1
            text: root.label_text
            markup: True
            text_size: self.size
            halign : 'center'
            valign : 'center'

        # Create switch
        Switch:
            id: enable_switch
            size_hint: 1, 1

            active: True if root.switch_active == True else False
            on_active: root.switch_active = self.active

        Spinner:
            id: labels_spinner
            size_hint : (0.5, 0.5)

            pos_hint: {'x': .5, 'y':.5}
            # size: 100, 44

            values: root.labels_list
            text: root.allowed_label
            on_text: root.labelChange(self.text)
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="run-the-application">Run the Application</h3>

<p>To run the application, two choices are possible, either:</p>

<ul>
  <li>
    <p>use the debug mode by pressing F5 then again F5 to launch the application.</p>
  </li>
  <li>
    <p>Or, you can run the application directly from the application folder</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>run_pensar.sh <span class="nt">-a</span> my_app.xml
</code></pre></div>    </div>
  </li>
</ul>

<p>A GUI should pop-up in full screen running the created</p>
<p align="center">
  <img src="/assets/images/pensarsdk/Peek-2019-08-16-16-34.gif" alt="demo object detection" />
</p>

<p><strong>Note</strong>: This GUI is created and adapted for Aerialtronics camera, Pensar, notice the setup for the twin cameras. Thanks to Pensar SDK, we can develop and test the application on the host machine before deployment on the camera.</p>

<h3 id="what-to-do-next">What to do next?</h3>

<ul>
  <li>Let me know what you think in the comment section and/or direct message me on <a href="https://www.linkedin.com/in/aminehy/">LinkedIn</a>.</li>
  <li>
    <p>Visit the official website <a href="https://pensarsdk.com/">https://pensarsdk.com/</a> to learn more about this solution.</p>
  </li>
  <li>You are a professional and you are interested in Pensar SDK solution, please feel free to contact Aerialtronics staff <a href="https://pensarsdk.com/">here</a>.</li>
</ul>

<h3 id="want-to-read-more-">Want to read more ?</h3>
<p>Checkout my past articles on <a href="https://medium.com/@Amine_hy">medium</a>:</p>

<ul>
  <li>
    <p><a href="https://towardsdatascience.com/have-you-optimized-your-deep-learning-model-before-deployment-cdc3aa7f413d">Have you Optimized your Deep Learning Model Before Deployment?</a></p>
  </li>
  <li>
    <p><a href="https://towardsdatascience.com/convolutional-neural-network-for-image-classification-with-implementation-on-python-using-pytorch-7b88342c9ca9">Deep Learning for image classification w/ implementation in PyTorch</a></p>
  </li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#computer-vision" class="page__taxonomy-item" rel="tag">Computer Vision</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#deep-learning" class="page__taxonomy-item" rel="tag">Deep learning</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2019-08-20T00:00:00+02:00">August 20, 2019</time></p>
        
      </footer>

      <section class="page__share">
  
  <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Pensar+SDK%2C+A+Rapid+Artificial+Intelligence+Application+Development+framework%20http%3A%2F%2Flocalhost%3A4000%2Fpensarsdk-1%2F"
    class="btn btn--twitter"
    onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
    title="Share on Twitter"><i
      class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fpensarsdk-1%2F"
    class="btn btn--facebook"
    onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
    title="Share on Facebook"><i
      class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fpensarsdk-1%2F"
    class="btn btn--linkedin"
    onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
    title="Share on LinkedIn"><i
      class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      
  <nav class="pagination">
    
      <a href="/Optimize/" class="pagination--pager" title="Have you Optimized your Deep Learning Model Before Deployment?
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/nature_1.jpeg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Optimize/" rel="permalink">Have you Optimized your Deep Learning Model Before Deployment?
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  8 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Optimization of deep learning model
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/nature_1.jpeg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/CNN-for-Image-Classification/" rel="permalink">Convolutional Neural Network for image classification
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  8 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">image classification with deep learning
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <center>
  <div class="page__footer-follow">
    <ul class="social-icons">

      
        
          

            <li>
              <a href="https://www.linkedin.com/in/aminehy/" rel="nofollow noopener noreferrer"><i class="fab fa-linkedin" aria-hidden="true"></i>
                LinkedIn
              </a>
            </li>
          
        
          

            <li>
              <a href="https://medium.com/@Amine_hy" rel="nofollow noopener noreferrer"><i class="fab fa-medium" aria-hidden="true"></i>
                Medium
              </a>
            </li>
          
        
          

            <li>
              <a href="https://github.com/aminehy" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i>
                GitHub
              </a>
            </li>
          
        
          

            <li>
              <a href="https://gitlab.com/aminehy" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-gitlab" aria-hidden="true"></i>
                GitLab
              </a>
            </li>
          
        
          

            <li>
              <a href="https://www.researchgate.net/profile/M_Amine_Hadj-Youcef" rel="nofollow noopener noreferrer"><i class="fab fa-researchgate" aria-hidden="true"></i>
                ResearshGate
              </a>
            </li>
          
        
      

      <!-- <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> feed</a></li> -->
    </ul>
 </div>

 <div class="page__footer-copyright">&copy; 2020 Amine Hadj-Youcef </div>
</center>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>










  </body>
</html>
